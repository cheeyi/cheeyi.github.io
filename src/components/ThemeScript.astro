---
// This component must be placed immediately after <html> tag
// to ensure theme is set before any CSS loads (critical for Safari)
---
<script is:inline>
	// Set theme immediately to prevent white background in Safari
	const theme = (() => {
		if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
			return localStorage.getItem('theme');
		}
		if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
			return 'dark';
		}
		return 'light';
	})();
	document.documentElement.setAttribute('data-theme', theme);
</script>
